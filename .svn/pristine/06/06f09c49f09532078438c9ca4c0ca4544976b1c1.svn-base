{"remainingRequest":"D:\\iview-admin-master\\node_modules\\babel-loader\\lib\\index.js!D:\\iview-admin-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\iview-admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\iview-admin-master\\src\\components\\main\\main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\iview-admin-master\\src\\components\\main\\main.vue","mtime":1562824530884},{"path":"D:\\iview-admin-master\\.babelrc","mtime":1560231513000},{"path":"D:\\iview-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\iview-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\iview-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\iview-admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"D:\\\\iview-admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"D:\\\\iview-admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SideMenu from \"./components/side-menu\";\nimport HeaderBar from \"./components/header-bar\";\nimport customBreadCrumb from \"./components/custom-bread-crumb\";\nimport TagsNav from \"./components/tags-nav\";\nimport User from \"./components/user\";\nimport ABackTop from \"./components/a-back-top\";\nimport Fullscreen from \"./components/fullscreen\";\nimport Language from \"./components/language\";\nimport ErrorStore from \"./components/error-store\";\nimport { mapMutations, mapActions, mapGetters } from 'vuex';\nimport { getNewTagList, routeEqual, getFirstChildForMenuByRequest } from '@/libs/util';\nimport routers from '@/router/routers';\nimport minLogo from '@/assets/images/logo-min.jpg';\nimport maxLogo from '@/assets/images/logo.jpg';\nimport \"./main.less\";\nimport { constants } from 'crypto';\nimport { stat } from 'fs';\nexport default {\n  name: 'Main',\n  components: {\n    SideMenu: SideMenu,\n    HeaderBar: HeaderBar,\n    customBreadCrumb: customBreadCrumb,\n    Language: Language,\n    TagsNav: TagsNav,\n    Fullscreen: Fullscreen,\n    ErrorStore: ErrorStore,\n    User: User,\n    ABackTop: ABackTop\n  },\n  data: function data() {\n    return {\n      collapsed: false,\n      minLogo: minLogo,\n      maxLogo: maxLogo,\n      isFullscreen: false\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['errorCount']), {\n    tagNavList: function tagNavList() {\n      return this.$store.state.app.tagNavList;\n    },\n    breadCrumbList: function breadCrumbList() {\n      return this.$store.state.app.breadCrumbList;\n    },\n    // sidemenuList () {\n    //   return this.$store.getters.sidemenuList\n    // },\n    // tagRouter () {\n    //   return this.$store.state.app.tagRouter\n    // },\n    userAvatar: function userAvatar() {\n      return this.$store.state.user.avatarImgPath;\n    },\n    cacheList: function cacheList() {\n      var list = ['ParentView'].concat(_toConsumableArray(this.tagNavList.length ? this.tagNavList.filter(function (item) {\n        return !(item.meta && item.meta.notCache);\n      }).map(function (item) {\n        return item.name;\n      }) : []));\n      return list;\n    },\n    menuList: function menuList() {\n      return this.$store.getters.menuList;\n    },\n    local: function local() {\n      return this.$store.state.app.local;\n    },\n    hasReadErrorPage: function hasReadErrorPage() {\n      return this.$store.state.app.hasReadErrorPage;\n    },\n    unreadCount: function unreadCount() {\n      return this.$store.state.user.unreadCount;\n    }\n  }),\n  methods: _objectSpread({}, mapMutations(['setBreadCrumb', 'setTagNavList', 'addTag', 'setLocal', 'setHomeRoute', 'closeTag', 'setSidemenuList']), mapActions(['handleLogin', 'getUnreadMessageCount', 'setNavMenu', 'setSidemenuList']), {\n    selectNav: function selectNav(name) {\n      this.setNavMenu(name);\n      this.setSidemenuList(name);\n      this.$router.push({\n        name: getFirstChildForMenuByRequest(this.$store.getters.routes, name).name\n      });\n      console.log(name, 'main.vue', this.$route.name);\n    }\n  }),\n  watch: {// '$route' (newRoute) {\n    //   const { name, query, params, meta } = newRoute\n    //   this.addTag({\n    //     route: { name, query, params, meta },\n    //     type: 'push'\n    //   })\n    //   console.log('main.vue $route', newRoute)\n    //   this.setBreadCrumb(newRoute)\n    //   this.setTagNavList(getNewTagList(this.tagNavList, newRoute))\n    //   this.$refs.sideMenu.updateOpenName(newRoute.name)\n    // }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    /**\n     * @description 初始化设置面包屑导航和标签导航\n     */\n    // this.setTagNavList()\n    // this.setHomeRoute(this.$route)\n    // const { name, params, query, meta } = this.$route\n    // this.addTag({\n    //   route: { name, params, query, meta }\n    // })\n    // this.setBreadCrumb(this.$route)\n    // 设置初始语言\n    this.setLocal(this.$i18n.locale); // 如果当前打开页面不在标签栏中，跳到homeName页\n\n    if (!this.tagNavList.find(function (item) {\n      return item.name === _this.$route.name;\n    })) {\n      this.$router.push({\n        name: this.$config.homeName\n      });\n    } // 获取未读消息条数\n\n\n    this.getUnreadMessageCount();\n  }\n};",{"version":3,"sources":["main.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Layout style=\"height: 100%\" class=\"main\">\n    <Header class=\"header-con\">\n      <header-bar @on-select=\"selectNav\">\n        <user :message-unread-count=\"unreadCount\" :user-avatar=\"userAvatar\"/>\n        <language v-if=\"$config.useI18n\" @on-lang-change=\"setLocal\" style=\"margin-right: 10px;\" :lang=\"local\"/>\n        <error-store v-if=\"$config.plugin['error-store'] && $config.plugin['error-store'].showInHeader\" :has-read=\"hasReadErrorPage\" :count=\"errorCount\"></error-store>\n        <fullscreen v-model=\"isFullscreen\" style=\"margin-right: 10px;\"/>\n      </header-bar>\n    </Header>\n    <Layout>\n        <router-view/>\n    </Layout>\n    <!-- <Footer>Footer</Footer> -->\n  </Layout>\n</template>\n<script>\nimport SideMenu from './components/side-menu'\nimport HeaderBar from './components/header-bar'\nimport customBreadCrumb from './components/custom-bread-crumb'\nimport TagsNav from './components/tags-nav'\nimport User from './components/user'\nimport ABackTop from './components/a-back-top'\nimport Fullscreen from './components/fullscreen'\nimport Language from './components/language'\nimport ErrorStore from './components/error-store'\nimport { mapMutations, mapActions, mapGetters } from 'vuex'\nimport { getNewTagList, routeEqual, getFirstChildForMenuByRequest } from '@/libs/util'\nimport routers from '@/router/routers'\nimport minLogo from '@/assets/images/logo-min.jpg'\nimport maxLogo from '@/assets/images/logo.jpg'\nimport './main.less'\nimport { constants } from 'crypto';\nimport { stat } from 'fs';\nexport default {\n  name: 'Main',\n  components: {\n    SideMenu,\n    HeaderBar,\n    customBreadCrumb,\n    Language,\n    TagsNav,\n    Fullscreen,\n    ErrorStore,\n    User,\n    ABackTop\n  },\n  data () {\n    return {\n      collapsed: false,\n      minLogo,\n      maxLogo,\n      isFullscreen: false\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'errorCount'\n    ]),\n    tagNavList () {\n      return this.$store.state.app.tagNavList\n    },\n    breadCrumbList () {\n      return this.$store.state.app.breadCrumbList\n    },\n    // sidemenuList () {\n    //   return this.$store.getters.sidemenuList\n    // },\n    // tagRouter () {\n    //   return this.$store.state.app.tagRouter\n    // },\n    userAvatar () {\n      return this.$store.state.user.avatarImgPath\n    },\n    cacheList () {\n      const list = ['ParentView', ...this.tagNavList.length ? this.tagNavList.filter(item => !(item.meta && item.meta.notCache)).map(item => item.name) : []]\n      return list\n    },\n    menuList () {\n      return this.$store.getters.menuList\n    },\n    local () {\n      return this.$store.state.app.local\n    },\n    hasReadErrorPage () {\n      return this.$store.state.app.hasReadErrorPage\n    },\n    unreadCount () {\n      return this.$store.state.user.unreadCount\n    }\n  },\n  methods: {\n    ...mapMutations([\n      'setBreadCrumb',\n      'setTagNavList',\n      'addTag',\n      'setLocal',\n      'setHomeRoute',\n      'closeTag',\n      'setSidemenuList'\n    ]),\n    ...mapActions([\n      'handleLogin',\n      'getUnreadMessageCount',\n      'setNavMenu',\n      'setSidemenuList'\n    ]),\n    selectNav (name) {\n      this.setNavMenu(name)\n      this.setSidemenuList(name)\n      this.$router.push({\n        name: getFirstChildForMenuByRequest(this.$store.getters.routes, name).name\n      })\n      console.log(name, 'main.vue', this.$route.name)\n    },\n    // turnToPage (route) {\n    //   let { name, params, query } = {}\n    //   if (typeof route === 'string') name = route\n    //   else {\n    //     name = route.name\n    //     params = route.params\n    //     query = route.query\n    //   }\n    //   if (name.indexOf('isTurnByHref_') > -1) {\n    //     window.open(name.split('_')[1])\n    //     return\n    //   }\n    //   this.$router.push({\n    //     name,\n    //     params,\n    //     query\n    //   })\n    // },\n    // handleCollapsedChange (state) {\n    //   this.collapsed = state\n    // },\n    // handleCloseTag (res, type, route) {\n    //   if (type !== 'others') {\n    //     if (type === 'all') {\n    //       this.turnToPage(this.$config.homeName)\n    //     } else {\n    //       if (routeEqual(this.$route, route)) {\n    //         this.closeTag(route)\n    //       }\n    //     }\n    //   }\n    //   this.setTagNavList(res)\n    // },\n    // handleClick (item) {\n    //   this.turnToPage(item)\n    // }\n  },\n  watch: {\n    // '$route' (newRoute) {\n    //   const { name, query, params, meta } = newRoute\n    //   this.addTag({\n    //     route: { name, query, params, meta },\n    //     type: 'push'\n    //   })\n    //   console.log('main.vue $route', newRoute)\n    //   this.setBreadCrumb(newRoute)\n    //   this.setTagNavList(getNewTagList(this.tagNavList, newRoute))\n    //   this.$refs.sideMenu.updateOpenName(newRoute.name)\n    // }\n  },\n  mounted () {\n    /**\n     * @description 初始化设置面包屑导航和标签导航\n     */\n    // this.setTagNavList()\n    // this.setHomeRoute(this.$route)\n    // const { name, params, query, meta } = this.$route\n    // this.addTag({\n    //   route: { name, params, query, meta }\n    // })\n    \n    // this.setBreadCrumb(this.$route)\n    // 设置初始语言\n    this.setLocal(this.$i18n.locale)\n    // 如果当前打开页面不在标签栏中，跳到homeName页\n    if (!this.tagNavList.find(item => item.name === this.$route.name)) {\n      this.$router.push({\n        name: this.$config.homeName\n      })\n    }\n    // 获取未读消息条数\n    this.getUnreadMessageCount()\n  }\n}\n</script>\n"],"sourceRoot":"src/components/main"}]}