{"remainingRequest":"D:\\iview-admin-master\\node_modules\\babel-loader\\lib\\index.js!D:\\iview-admin-master\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\iview-admin-master\\src\\store\\module\\app.js","dependencies":[{"path":"D:\\iview-admin-master\\src\\store\\module\\app.js","mtime":1565070238361},{"path":"D:\\iview-admin-master\\.babelrc","mtime":1560231513000},{"path":"D:\\iview-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\iview-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\iview-admin-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"D:\\\\iview-admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"D:\\\\iview-admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport { getBreadCrumbList, setTagNavListInLocalstorage, getMenuByRouter, getSidemenuList, getTagNavListFromLocalstorage, getHomeRoute, getNextRoute, routeHasExist, routeEqual, getRouteTitleHandled, localSave, localRead } from '@/libs/util';\nimport { saveErrorLogger } from '@/api/data';\nimport router from '@/router';\nimport config from '@/config';\nvar homeName = config.homeName;\n\nvar closePage = function closePage(state, route) {\n  var nextRoute = getNextRoute(state.tagNavList, route);\n  state.tagNavList = state.tagNavList.filter(function (item) {\n    return !routeEqual(item, route);\n  });\n  router.push(nextRoute);\n};\n\nexport default {\n  state: {\n    navMenu: '',\n    breadCrumbList: [],\n    sidemenuList: [],\n    tagNavList: [],\n    homeRoute: {},\n    local: localRead('local'),\n    errorList: [],\n    hasReadErrorPage: false\n  },\n  getters: {\n    menuList: function menuList(state, getters, rootState) {\n      // 所有的menulist\n      return getMenuByRouter(rootState.user.routes, rootState.user.access);\n    },\n    errorCount: function errorCount(state) {\n      return state.errorList.length;\n    },\n    sidemenuList: function sidemenuList(state, getters, rootState) {\n      // 侧边栏\n      return state.sidemenuList;\n    },\n    navMenu: function navMenu(state) {\n      return state.navMenu;\n    }\n  },\n  mutations: {\n    setBreadCrumb: function setBreadCrumb(state, route) {\n      state.breadCrumbList = getBreadCrumbList(route, state.homeRoute);\n    },\n    setSidemenuList: function setSidemenuList(state, sidemenuList) {\n      state.sidemenuList = sidemenuList;\n    },\n    setNavMenu: function setNavMenu(state, request) {\n      console.log(request, 'setName');\n      state.navMenu = request;\n    },\n    setHomeRoute: function setHomeRoute(state, routes) {\n      state.homeRoute = getHomeRoute(routes, homeName);\n    },\n    setTagNavList: function setTagNavList(state, list) {\n      var tagList = [];\n\n      if (list) {\n        tagList = _toConsumableArray(list);\n      } else tagList = getTagNavListFromLocalstorage() || [];\n\n      if (tagList[0] && tagList[0].name !== homeName) tagList.shift();\n      var homeTagIndex = tagList.findIndex(function (item) {\n        return item.name === homeName;\n      });\n\n      if (homeTagIndex > 0) {\n        var homeTag = tagList.splice(homeTagIndex, 1)[0];\n        tagList.unshift(homeTag);\n      }\n\n      state.tagNavList = tagList;\n      setTagNavListInLocalstorage(_toConsumableArray(tagList));\n    },\n    closeTag: function closeTag(state, route) {\n      var tag = state.tagNavList.filter(function (item) {\n        return routeEqual(item, route);\n      });\n      route = tag[0] ? tag[0] : null;\n      console.log(tag, route, 'closeTag');\n      if (!route) return;\n      closePage(state, route);\n    },\n    addTag: function addTag(state, _ref) {\n      var route = _ref.route,\n          _ref$type = _ref.type,\n          type = _ref$type === void 0 ? 'unshift' : _ref$type;\n      var router = getRouteTitleHandled(route);\n\n      if (!routeHasExist(state.tagNavList, router)) {\n        if (type === 'push') state.tagNavList.push(router);else {\n          if (router.name === homeName) state.tagNavList.unshift(router);else state.tagNavList.splice(1, 0, router);\n        }\n        setTagNavListInLocalstorage(_toConsumableArray(state.tagNavList));\n      }\n    },\n    setLocal: function setLocal(state, lang) {\n      localSave('local', lang);\n      state.local = lang;\n    },\n    addError: function addError(state, error) {\n      state.errorList.push(error);\n    },\n    setHasReadErrorLoggerStatus: function setHasReadErrorLoggerStatus(state) {\n      var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      state.hasReadErrorPage = status;\n    }\n  },\n  actions: {\n    addErrorLog: function addErrorLog(_ref2, info) {\n      var commit = _ref2.commit,\n          rootState = _ref2.rootState;\n      if (!window.location.href.includes('error_logger_page')) commit('setHasReadErrorLoggerStatus', false);\n      var _rootState$user = rootState.user,\n          token = _rootState$user.token,\n          userId = _rootState$user.userId,\n          userName = _rootState$user.userName;\n\n      var data = _objectSpread({}, info, {\n        time: Date.parse(new Date()),\n        token: token,\n        userId: userId,\n        userName: userName\n      });\n\n      saveErrorLogger(info).then(function () {\n        commit('addError', data);\n      });\n    },\n    setNavMenu: function setNavMenu(_ref3, request) {\n      var commit = _ref3.commit,\n          state = _ref3.state,\n          rootState = _ref3.rootState;\n      commit('setNavMenu', request);\n    },\n    setSidemenuList: function setSidemenuList(_ref4, request) {\n      var commit = _ref4.commit,\n          state = _ref4.state,\n          rootState = _ref4.rootState;\n      var sidemenuList = getSidemenuList(state, rootState.user.routes);\n      commit('setSidemenuList', sidemenuList);\n    }\n  }\n};",{"version":3,"sources":["D:\\iview-admin-master\\src\\store\\module\\app.js"],"names":["getBreadCrumbList","setTagNavListInLocalstorage","getMenuByRouter","getSidemenuList","getTagNavListFromLocalstorage","getHomeRoute","getNextRoute","routeHasExist","routeEqual","getRouteTitleHandled","localSave","localRead","saveErrorLogger","router","config","homeName","closePage","state","route","nextRoute","tagNavList","filter","item","push","navMenu","breadCrumbList","sidemenuList","homeRoute","local","errorList","hasReadErrorPage","getters","menuList","rootState","user","routes","access","errorCount","length","mutations","setBreadCrumb","setSidemenuList","setNavMenu","request","console","log","setHomeRoute","setTagNavList","list","tagList","name","shift","homeTagIndex","findIndex","homeTag","splice","unshift","closeTag","tag","addTag","type","setLocal","lang","addError","error","setHasReadErrorLoggerStatus","status","actions","addErrorLog","info","commit","window","location","href","includes","token","userId","userName","data","time","Date","parse","then"],"mappings":"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","sourcesContent":["import {\n  getBreadCrumbList,\n  setTagNavListInLocalstorage,\n  getMenuByRouter,\n  getSidemenuList,\n  getTagNavListFromLocalstorage,\n  getHomeRoute,\n  getNextRoute,\n  routeHasExist,\n  routeEqual,\n  getRouteTitleHandled,\n  localSave,\n  localRead\n} from '@/libs/util'\nimport { saveErrorLogger } from '@/api/data'\nimport router from '@/router'\nimport config from '@/config'\nconst { homeName } = config\n\nconst closePage = (state, route) => {\n  const nextRoute = getNextRoute(state.tagNavList, route)\n  state.tagNavList = state.tagNavList.filter(item => {\n    return !routeEqual(item, route)\n  })\n  router.push(nextRoute)\n}\n\nexport default {\n  state: {\n    navMenu: '',\n    breadCrumbList: [],\n    sidemenuList: [],\n    tagNavList: [],\n    homeRoute: {},\n    local: localRead('local'),\n    errorList: [],\n    hasReadErrorPage: false\n  },\n  getters: {\n    menuList: (state, getters, rootState) => { // 所有的menulist\n      return getMenuByRouter(rootState.user.routes, rootState.user.access)\n    },\n    errorCount: state => state.errorList.length,\n    sidemenuList: (state, getters, rootState) => { // 侧边栏\n      return state.sidemenuList\n    },\n    navMenu: state => state.navMenu\n  },\n  mutations: {\n    setBreadCrumb (state, route) {\n      state.breadCrumbList = getBreadCrumbList(route, state.homeRoute)\n    },\n    setSidemenuList (state, sidemenuList) {\n      state.sidemenuList = sidemenuList\n    },\n    setNavMenu (state, request) {\n      console.log(request, 'setName')\n      state.navMenu = request\n    },\n    setHomeRoute (state, routes) {\n      state.homeRoute = getHomeRoute(routes, homeName)\n    },\n    setTagNavList (state, list) {\n      let tagList = []\n      if (list) {\n        tagList = [...list]\n      } else tagList = getTagNavListFromLocalstorage() || []\n      if (tagList[0] && tagList[0].name !== homeName) tagList.shift()\n      let homeTagIndex = tagList.findIndex(item => item.name === homeName)\n      if (homeTagIndex > 0) {\n        let homeTag = tagList.splice(homeTagIndex, 1)[0]\n        tagList.unshift(homeTag)\n      }\n      state.tagNavList = tagList\n      setTagNavListInLocalstorage([...tagList])\n    },\n    closeTag (state, route) {\n      let tag = state.tagNavList.filter(item => routeEqual(item, route))\n      route = tag[0] ? tag[0] : null\n      console.log(tag, route, 'closeTag')\n      if (!route) return\n      closePage(state, route)\n    },\n    addTag (state, { route, type = 'unshift' }) {\n      let router = getRouteTitleHandled(route)\n      if (!routeHasExist(state.tagNavList, router)) {\n        if (type === 'push') state.tagNavList.push(router)\n        else {\n          if (router.name === homeName) state.tagNavList.unshift(router)\n          else state.tagNavList.splice(1, 0, router)\n        }\n        setTagNavListInLocalstorage([...state.tagNavList])\n      }\n    },\n    setLocal (state, lang) {\n      localSave('local', lang)\n      state.local = lang\n    },\n    addError (state, error) {\n      state.errorList.push(error)\n    },\n    setHasReadErrorLoggerStatus (state, status = true) {\n      state.hasReadErrorPage = status\n    }\n  },\n  actions: {\n    addErrorLog ({ commit, rootState }, info) {\n      if (!window.location.href.includes('error_logger_page')) commit('setHasReadErrorLoggerStatus', false)\n      const { user: { token, userId, userName } } = rootState\n      let data = {\n        ...info,\n        time: Date.parse(new Date()),\n        token,\n        userId,\n        userName\n      }\n      saveErrorLogger(info).then(() => {\n        commit('addError', data)\n      })\n    },\n    setNavMenu ({ commit, state, rootState }, request) {\n      commit('setNavMenu', request)\n    },\n    setSidemenuList ({ commit, state, rootState }, request) {\n      var sidemenuList = getSidemenuList(state, rootState.user.routes)\n      commit('setSidemenuList', sidemenuList)\n    }\n  }\n}\n"]}]}